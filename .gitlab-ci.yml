variables:
  GIT_SUBMODULE_STRATEGY: recursive

stages:
  - Build

build:
  stage: Build
  image: asciidoctor/docker-asciidoctor:latest
  tags:
    - docker
  script: |
    apk --update add grep
    grep -lR ':pdf-theme:' ./* | while read i; do asciidoctor-pdf -a pdf-themesdir=./theming/resources/themes/ ${i}; done
    grep -lR ':style: presentation' ./* | while read i; do asciidoctor-revealjs -v --trace ${i}; done    
  artifacts:
    untracked: True
    expire_in: 2 weeks
